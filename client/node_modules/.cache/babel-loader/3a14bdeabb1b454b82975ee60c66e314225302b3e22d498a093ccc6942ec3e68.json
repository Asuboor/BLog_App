{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Abrar khan/Desktop/The Blogs/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Abrar khan/Desktop/The Blogs/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Abrar khan/Desktop/The Blogs/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useContext,useState}from\"react\";import{Navigate}from\"react-router-dom\";import{UserContext}from\"../UserContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function LoginPage(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),redirect=_useState6[0],setRedirect=_useState6[1];var _useContext=useContext(UserContext),setUserInfo=_useContext.setUserInfo;function login(_x){return _login.apply(this,arguments);}function _login(){_login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(ev){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:ev.preventDefault();_context.next=3;return fetch('https://blog-app-jrzx.onrender.com/login',{method:'POST',body:JSON.stringify({username:username,password:password}),headers:{'Content-Type':'application/json'},credentials:'include'});case 3:response=_context.sent;if(response.ok){response.json().then(function(userInfo){setUserInfo(userInfo);setRedirect(true);});}else{alert('wrong credentials');}case 5:case\"end\":return _context.stop();}},_callee);}));return _login.apply(this,arguments);}if(redirect){return/*#__PURE__*/_jsx(Navigate,{to:'/'});}return/*#__PURE__*/_jsxs(\"form\",{className:\"login\",onSubmit:login,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"username\",value:username,onChange:function onChange(ev){return setUsername(ev.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password\",value:password,onChange:function onChange(ev){return setPassword(ev.target.value);}}),/*#__PURE__*/_jsx(\"button\",{children:\"Login\"})]});}","map":{"version":3,"names":["useContext","useState","Navigate","UserContext","LoginPage","username","setUsername","password","setPassword","redirect","setRedirect","setUserInfo","login","ev","preventDefault","fetch","method","body","JSON","stringify","headers","credentials","response","ok","json","then","userInfo","alert","target","value"],"sources":["C:/Users/Abrar khan/Desktop/The Blogs/client/src/pages/LoginPage.js"],"sourcesContent":["import {useContext, useState} from \"react\";\nimport {Navigate} from \"react-router-dom\";\nimport {UserContext} from \"../UserContext\";\n\nexport default function LoginPage() {\n  const [username,setUsername] = useState('');\n  const [password,setPassword] = useState('');\n  const [redirect,setRedirect] = useState(false);\n  const {setUserInfo} = useContext(UserContext);\n  async function login(ev) {\n    ev.preventDefault();\n    const response = await fetch('https://blog-app-jrzx.onrender.com/login', {\n      method: 'POST',\n      body: JSON.stringify({username, password}),\n      headers: {'Content-Type':'application/json'},\n      credentials: 'include',\n    });\n    if (response.ok) {\n      response.json().then(userInfo => {\n        setUserInfo(userInfo);\n        setRedirect(true);\n      });\n    } else {\n      alert('wrong credentials');\n    }\n  }\n\n  if (redirect) {\n    return <Navigate to={'/'} />\n  }\n  return (\n    <form className=\"login\" onSubmit={login}>\n      <h1>Login</h1>\n      <input type=\"text\"\n             placeholder=\"username\"\n             value={username}\n             onChange={ev => setUsername(ev.target.value)}/>\n      <input type=\"password\"\n             placeholder=\"password\"\n             value={password}\n             onChange={ev => setPassword(ev.target.value)}/>\n      <button>Login</button>\n    </form>\n  );\n}"],"mappings":"sZAAA,OAAQA,UAAU,CAAEC,QAAQ,KAAO,OAAO,CAC1C,OAAQC,QAAQ,KAAO,kBAAkB,CACzC,OAAQC,WAAW,KAAO,gBAAgB,CAAC,wFAE3C,cAAe,SAASC,UAAS,EAAG,CAClC,cAA+BH,QAAQ,CAAC,EAAE,CAAC,wCAApCI,QAAQ,eAACC,WAAW,eAC3B,eAA+BL,QAAQ,CAAC,EAAE,CAAC,yCAApCM,QAAQ,eAACC,WAAW,eAC3B,eAA+BP,QAAQ,CAAC,KAAK,CAAC,yCAAvCQ,QAAQ,eAACC,WAAW,eAC3B,gBAAsBV,UAAU,CAACG,WAAW,CAAC,CAAtCQ,WAAW,aAAXA,WAAW,CAA4B,QAC/BC,MAAK,6HAApB,iBAAqBC,EAAE,gIACrBA,EAAE,CAACC,cAAc,EAAE,CAAC,sBACGC,MAAK,CAAC,0CAA0C,CAAE,CACvEC,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAACd,QAAQ,CAARA,QAAQ,CAAEE,QAAQ,CAARA,QAAQ,CAAC,CAAC,CAC1Ca,OAAO,CAAE,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAC5CC,WAAW,CAAE,SACf,CAAC,CAAC,QALIC,QAAQ,eAMd,GAAIA,QAAQ,CAACC,EAAE,CAAE,CACfD,QAAQ,CAACE,IAAI,EAAE,CAACC,IAAI,CAAC,SAAAC,QAAQ,CAAI,CAC/Bf,WAAW,CAACe,QAAQ,CAAC,CACrBhB,WAAW,CAAC,IAAI,CAAC,CACnB,CAAC,CAAC,CACJ,CAAC,IAAM,CACLiB,KAAK,CAAC,mBAAmB,CAAC,CAC5B,CAAC,qDACF,wCAED,GAAIlB,QAAQ,CAAE,CACZ,mBAAO,KAAC,QAAQ,EAAC,EAAE,CAAE,GAAI,EAAG,CAC9B,CACA,mBACE,cAAM,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAEG,KAAM,wBACtC,oBAAI,OAAK,EAAK,cACd,cAAO,IAAI,CAAC,MAAM,CACX,WAAW,CAAC,UAAU,CACtB,KAAK,CAAEP,QAAS,CAChB,QAAQ,CAAE,kBAAAQ,EAAE,QAAIP,YAAW,CAACO,EAAE,CAACe,MAAM,CAACC,KAAK,CAAC,EAAC,EAAE,cACtD,cAAO,IAAI,CAAC,UAAU,CACf,WAAW,CAAC,UAAU,CACtB,KAAK,CAAEtB,QAAS,CAChB,QAAQ,CAAE,kBAAAM,EAAE,QAAIL,YAAW,CAACK,EAAE,CAACe,MAAM,CAACC,KAAK,CAAC,EAAC,EAAE,cACtD,wBAAQ,OAAK,EAAS,GACjB,CAEX"},"metadata":{},"sourceType":"module","externalDependencies":[]}