{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Abrar khan/Desktop/The Blogs/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Abrar khan/Desktop/The Blogs/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Abrar khan/Desktop/The Blogs/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{Navigate,useParams}from\"react-router-dom\";import Editor from\"../Editor\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function EditPost(){var _useParams=useParams(),id=_useParams.id;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),summary=_useState4[0],setSummary=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),content=_useState6[0],setContent=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),files=_useState8[0],setFiles=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),redirect=_useState10[0],setRedirect=_useState10[1];useEffect(function(){fetch('https://blogs-app-ulti.onrender.com/post/'+id).then(function(response){response.json().then(function(postInfo){setTitle(postInfo.title);setContent(postInfo.content);setSummary(postInfo.summary);});});},[]);function updatePost(_x){return _updatePost.apply(this,arguments);}function _updatePost(){_updatePost=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(ev){var data,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:ev.preventDefault();data=new FormData();data.set('title',title);data.set('summary',summary);data.set('content',content);data.set('id',id);if(files!==null&&files!==void 0&&files[0]){data.set('file',files===null||files===void 0?void 0:files[0]);}_context.next=9;return fetch('https://blogs-app-ulti.onrender.com/post',{method:'PUT',body:data,credentials:'include'});case 9:response=_context.sent;if(response.ok){setRedirect(true);}case 11:case\"end\":return _context.stop();}},_callee);}));return _updatePost.apply(this,arguments);}if(redirect){return/*#__PURE__*/_jsx(Navigate,{to:'/post/'+id});}return/*#__PURE__*/_jsxs(\"form\",{onSubmit:updatePost,children:[/*#__PURE__*/_jsx(\"input\",{type:\"title\",placeholder:'Title',value:title,onChange:function onChange(ev){return setTitle(ev.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"summary\",placeholder:'Summary',value:summary,onChange:function onChange(ev){return setSummary(ev.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(ev){return setFiles(ev.target.files);}}),/*#__PURE__*/_jsx(Editor,{onChange:setContent,value:content}),/*#__PURE__*/_jsx(\"button\",{style:{marginTop:'5px'},children:\"Update post\"})]});}","map":{"version":3,"names":["useEffect","useState","Navigate","useParams","Editor","EditPost","id","title","setTitle","summary","setSummary","content","setContent","files","setFiles","redirect","setRedirect","fetch","then","response","json","postInfo","updatePost","ev","preventDefault","data","FormData","set","method","body","credentials","ok","target","value","marginTop"],"sources":["C:/Users/Abrar khan/Desktop/The Blogs/client/src/pages/EditPost.js"],"sourcesContent":["import {useEffect, useState} from \"react\";\nimport {Navigate, useParams} from \"react-router-dom\";\nimport Editor from \"../Editor\";\n\nexport default function EditPost() {\n  const {id} = useParams();\n  const [title,setTitle] = useState('');\n  const [summary,setSummary] = useState('');\n  const [content,setContent] = useState('');\n  const [files, setFiles] = useState('');\n  const [redirect,setRedirect] = useState(false);\n\n  useEffect(() => {\n    fetch('https://blogs-app-ulti.onrender.com/post/'+id)\n      .then(response => {\n        response.json().then(postInfo => {\n          setTitle(postInfo.title);\n          setContent(postInfo.content);\n          setSummary(postInfo.summary);\n        });\n      });\n  }, []);\n\n  async function updatePost(ev) {\n    ev.preventDefault();\n    const data = new FormData();\n    data.set('title', title);\n    data.set('summary', summary);\n    data.set('content', content);\n    data.set('id', id);\n    if (files?.[0]) {\n      data.set('file', files?.[0]);\n    }\n    const response = await fetch('https://blogs-app-ulti.onrender.com/post', {\n      method: 'PUT',\n      body: data,\n      credentials: 'include',\n    });\n    if (response.ok) {\n      setRedirect(true);\n    }\n  }\n\n  if (redirect) {\n    return <Navigate to={'/post/'+id} />\n  }\n\n  return (\n    <form onSubmit={updatePost}>\n      <input type=\"title\"\n             placeholder={'Title'}\n             value={title}\n             onChange={ev => setTitle(ev.target.value)} />\n      <input type=\"summary\"\n             placeholder={'Summary'}\n             value={summary}\n             onChange={ev => setSummary(ev.target.value)} />\n      <input type=\"file\"\n             onChange={ev => setFiles(ev.target.files)} />\n      <Editor onChange={setContent} value={content} />\n      <button style={{marginTop:'5px'}}>Update post</button>\n    </form>\n  );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}